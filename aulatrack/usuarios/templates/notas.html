{% extends 'base.html' %}
{% load static %}

{% block content %}
<h2 class="sectionTitle">{{ asignatura.nombre }} - {{ curso.a√±o }} {{ curso.nombre }}</h2>
<p class="hint">Registro de notas</p>
<div class="divider"></div>

<form method="post">
  {% csrf_token %}
  <div class="grades-scroll">
    <table class="grades-table">
      <thead>
        <tr>
          <th>Alumno</th>
          {% for i in columnas_notas %}
            <th>Nota {{ i }}</th>
          {% endfor %}
          <th>Promedio</th>
        </tr>
      </thead>
      <tbody>
        {% for alumno, data in notas_por_alumno.items %}
        <tr>
          <td style="text-align:left;">{{ alumno.nombres }} {{ alumno.apellidos }}</td>

          {% for nota in data.notas %}
            <td>
              <input type="number" step="0.1" min="1.0" max="7.0"
                     name="nota_{{ alumno.id }}_{{ forloop.counter }}"
                     value="{{ nota }}">
            </td>
          {% endfor %}

          <td>
            {% if data.promedio %}
              {{ data.promedio }}
            {% else %}
              -
            {% endif %}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <button type="submit" class="btn-primary">Guardar</button>
</form>


<style>
  .grades-scroll {
    overflow-x: auto;
    margin-top: 20px;
  }

  .grades-table {
    width: 100%;
    border-collapse: collapse;
    text-align: center;
    font-size: 14px;
  }

  .grades-table th, .grades-table td {
    border: 1px solid #e5e7eb;
    padding: 10px;
  }

  .grades-table th {
    background-color: #f3f4f6;
    font-weight: 600;
  }

  .grades-table tr:hover {
    background-color: #fafafa;
  }

  .grades-table input {
    width: 60px;
    text-align: center;
    border: 1px solid #d1d5db;
    border-radius: 4px;
    padding: 4px;
  }

  .btn-primary {
    margin-top: 20px;
    background-color: #6b21a8;
    color: white;
    padding: 10px 20px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
  }

  .btn-primary:hover {
    background-color: #581c87;
  }

  .sectionTitle {
    font-size: 22px;
    font-weight: 700;
    color: #1f2937;
  }

  .hint {
    color: #6b7280;
    font-size: 14px;
  }

  .divider {
    height: 2px;
    width: 100%;
    background: linear-gradient(to right, #6b21a8, transparent);
    margin: 10px 0 20px;
  }
</style>
{% endblock %}
